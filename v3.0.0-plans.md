# v3.0.0 规划文档

**创建日期:** 2026-02-09
**状态:** 已实现（已提交，待 tag）

---

## Bug

### 1. 编辑器列表样式问题
**问题描述:**
- 有序列表（1. 2. 3.）的数字和点挤在一起，看不到数字
- 无序列表（-）的减号位置不对
- 列表的文字部分和正文左边界对齐，导致列表符号（数字/减号）"挂在"左边界外面

**预期效果:**
- 列表应该有左缩进，符号和文字都向右缩进
- 符号和文字之间有适当的间距
- 符号不能挂在正文左边界外面

**相关文件:** `src/styles/App.css`

---

### 2. 标签页拖拽问题
**问题描述:**
- 拖动时没有拖动视觉效果（只有原元素变半透明）
- 拖不到列表最底部
- Esc 键无法取消拖动

**预期效果:**
- 拖动时有元素跟随效果，能清楚看到正在拖动的内容
- 可以拖到列表最底部
- 按 Esc 可以取消拖动操作

**相关文件:** `src/components/Sidebar.tsx`, `src/components/Sidebar.css`, `src/App.tsx`

---

## Enhancement

### 1. 备份列表 UI 优化
**问题描述:**
- 当前使用 Tab 切换按钮（"活跃标签"/"归档"/"回收站"）来查看不同列表
- 用户希望改为展开/折叠的形式

**预期效果:**
- 点击"备份列表"时，下面展开显示"归档"和"回收站"两个子项
- 再点击时可以折叠收起
- 类似树形菜单的交互方式

**相关文件:** `src/components/TabSearchModal.tsx`, `src/components/TabSearchModal.css`, `src/i18n/locales/*.json`

---

## Feature

### 1. 编辑器虚拟滚动（类似 VSCode 打字机模式）
**问题描述:**
- 当前只能在页面最底部编辑
- 无法向下滚动到空白区域

**预期效果:**
- 类似 VSCode 的行为，可以向下滚动到一片空白区域
- 光标可以定位到空白区域进行编辑
- 编辑时内容始终保持在舒适的视口位置

**相关文件:** `src/styles/App.css`

---

### 2. 标签页按最后编辑时间排序
**问题描述:**
- 当前只能手动排序
- 没有按最后编辑时间自动排序的功能

**预期效果:**
- 添加排序选项：手动排序 / 按最后编辑时间排序
- 选择按时间排序时，最近编辑的标签页排在前面
- 选项放在设置页面中

**相关文件:** `src/App.tsx`, `src/components/Settings.tsx`, `src/i18n/locales/*.json`

---

## 实现记录（摘要）

1. 编辑器列表样式：补全 `.ProseMirror` 内 `ol/ul/li` 样式与缩进，避免全局 `* { padding: 0 }` 导致 marker 被裁剪。
2. 侧边栏拖拽：增加拖拽预览（跟随元素）、支持拖到列表末尾（插入点语义），并支持 `Esc` 取消拖拽。
3. 搜索/备份列表 UI：将“归档/回收站”合并到“备份列表”展开项，保留计数与原有搜索行为。
4. 编辑器虚拟滚动：增加底部虚拟空白滚动区（类似 VSCode scrollBeyondLastLine 的体验）。
5. 标签页排序：在设置页提供“手动/最后编辑时间”排序选项并即时生效。
